<html>
	<head>
		
		<script type="text/javascript" src="Scripts/vendor/jquery-1.7.1.min.js"></script>
		<script type="text/javascript" src="Scripts/vendor/jspdf.js"></script>
		<script type="text/javascript" src="Scripts/vendor/jspdf.standard_fonts_metrics.js"></script> 
		<script type="text/javascript" src="Scripts/vendor/jspdf.split_text_to_size.js"></script>               
		<script type="text/javascript" src="Scripts/vendor/jspdf.from_html.js"></script>
		
		<script>
			$(document).ready(function(){
				
				
				
				
				
				
				
				//Obtain data passed in from the event.
				var data = window.location.href + "";
				var res = data.split("#"); 
				
				//Obtain eventTitle and replace underscores keys with spaces to re-establish our original string.
				var eventTitle = res[1];
				for (var i = 0; i < eventTitle.length; i++){
					eventTitle = eventTitle.replace("_", " ");
				}
				
				//Obtain description and replace underscores keys with spaces to re-establish our original string.
				var eventDescription = res[2] + "";
				for (var i = 0; i < eventDescription.length; i++){
					eventDescription = eventDescription.replace("_", "<br />");
					eventDescription = eventDescription.replace("%20", " ");
				}
				
				//Get the start and end dates of the event, replace the strings, and set them up as date objects.
				var startDate = new Date(parseInt(res[3].replace("_", " ")));
				var endDate = new Date(parseInt(res[4].replace("_", " ")));
				
				//Format time frames to include AM/PM as well as account for military time.
				var startHours = startDate.getHours();
				var startMin = startDate.getMinutes();
				if (startHours > 12){
					startHours-=12;
					startMin = startMin + " PM";
					}else if (startHours == 0){
					startHours = 12;
					startMin = startMin + "AM";
					}else{
					startMin = startMin + "AM";
				}
				
				//Add zero in front of minute form in case we're less than 10 min.
				if (parseInt(startMin) < 10){
					startMin = "0" + startMin;
				}
				
				//Format time frames to include AM/PM as well as account for military time.
				var endHours = endDate.getHours();
				var endMin = endDate.getMinutes();
				if (endHours > 12){
					endHours-=12;
					endMin = endMin + " PM";
					}else if (endHours == 0){
					endHours = 12;
					endMin = endMin + "AM";
					}else{
					endMin = endMin + "AM";
				}
				
				//Add zero in front of minute form in case we're less than 10 min.
				if (parseInt(endMin) < 10){
					endMin = "0" + endMin;
				}
				
				var startMonth = startDate.getUTCMonth() + 1;
				var startDay = startDate.getUTCDate();
				var startYear = startDate.getFullYear();
				
				var location = res[5] + "";
				
				for (var i = 0; i < location.length; i++){
					location = location.replace("_", " ");
				}
				
				//Place data dynamically within the iframe's varioius divs.
				document.getElementById('title').innerHTML = "Monday";
				document.getElementById('description').innerHTML = "<b><u>Description:</u></b> " + eventDescription;
				document.getElementById('date').innerHTML = "<b><u>When:</u></b> " + startMonth + "/" + startDay + "/" + startYear;
				document.getElementById('location').innerHTML = "<a href=\"http://maps.google.com/maps?q="+location+"\" target=\"_blank\" >" + location + "</a>";
				
				document.getElementById('time').innerHTML = "<b><u>Time:</u></b> " + startHours + ":" + startMin + " to " + endHours + ":" + endMin;
				
				
				
			});
		</script>
	</head>
	
	
	<body>
		<a id="cmd" href="#">output iframe to pdf</a>
		
	
			<p>Hello World </p>
			
			<h1 id="title"></h1>
			
			<p id="description"></p>

		
		
	</body>
</html>	